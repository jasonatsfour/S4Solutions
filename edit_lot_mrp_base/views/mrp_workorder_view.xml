<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="mrp_production_workorder_form_view_inherit_inherit_edit_lot_mrp_base" model="ir.ui.view">
        <field name="name">mrp.production.work.order.form.inherit_edit_lot_mrp_base</field>
        <field name="model">mrp.workorder</field>
        <field name="inherit_id" ref="mrp.mrp_production_workorder_form_view_inherit"/>
        <field name="arch" type="xml">
            <xpath expr="//field[@name='raw_workorder_line_ids']" position="after">
                <h4 attrs="{
                    'invisible': [('state', 'in', ['done', 'cancel']), ('production_state', 'not in', ['done', 'cancel'])]
                }">Workorder Stock Moves
                </h4>
                <field name="move_line_ids" attrs="{
                        'invisible': [('state', 'in', ['done', 'cancel']), ('production_state', 'not in', ['done', 'cancel'])]
                    }">
                    <tree editable="False" create="false" delete="false">
                        <field name="date" readonly="1"/>
                        <field name="reference" readonly="1"/>
                        <field name="origin" readonly="1"/>
                        <field name="product_id" readonly="1"/>
                        <field name="qty_done" readonly="1"/>
                        <field name="lot_id"
                               readonly="1"
                               context="{'default_product_id': product_id,'default_company_id':company_id}"/>
                        <field name="company_id"/>
                    </tree>
                </field>
            </xpath>
            <notebook position="inside">
                <page string="Components Serial/Lot"
                      attrs="{'invisible': ['|', ('state', 'not in', ['done', 'cancel']), ('production_state', 'in', ['done', 'cancel'])]}">
                    <h4>Workorder Stock Moves</h4>
                    <field name="edit_move_line_ids">
                        <tree editable="bottom" create="false" delete="false">
                            <field name="date" readonly="1"/>
                            <field name="reference" readonly="1"/>
                            <field name="origin" readonly="1"/>
                            <field name="product_id" readonly="1"/>
                            <field name="qty_done" readonly="1"/>
                            <field name="lot_id"
                                   context="{'default_product_id': product_id,'default_company_id':company_id}"/>
                            <field name="company_id"/>
                        </tree>
                    </field>
                </page>
            </notebook>
        </field>
    </record>
</odoo>
